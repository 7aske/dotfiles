#compdef git-branch-update

# Complete git branches
_git-branch-update() {
  local -a branches
  if git rev-parse --git-dir > /dev/null 2>&1; then
    branches=(${(f)"$(git for-each-ref --format='%(refname:short)' refs/heads/)"})
    _describe 'destination branch' branches
  else
    _message 'not a git repository'
  fi
}

_git-branch-update "$@"
